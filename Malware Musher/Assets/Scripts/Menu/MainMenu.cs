using UnityEngine;
using UnityEngine.UI;

public class MainMenu : MonoBehaviour {
    
    public GameObject loadMenu;
    public GameObject loadMenuButtonObject;
    public GameObject settingsMenu;
    public GameObject unsavedProgress;
    public GameObject loadingBar;
    public SaveManager saveManager;
    public Button loadMenuButton;
    public Button newGameButton;
    public Button settingsButton;
    public Button quitButton;
    public BoolObject hasPlayed;

    public void Start() {
        if (saveManager.SaveFilesExist()) {
            loadMenuButtonObject.SetActive(true);
        } else {
            loadMenuButtonObject.SetActive(false);
        }
        loadMenuButton.onClick.AddListener(LoadMenu);
        newGameButton.onClick.AddListener(NewGame);
        settingsButton.onClick.AddListener(Setings);
        quitButton.onClick.AddListener(Quit);
    }

    public void LoadMenu() {
        loadMenu.SetActive(true);
        this.gameObject.SetActive(false);
    }

    public void NewGame() {
        saveManager.NewGame();
        loadingBar.SetActive(true);
        this.gameObject.SetActive(false);
    }

    public void Setings() {
        settingsMenu.SetActive(true);
        this.gameObject.SetActive(false);
    }
 
    public void Quit() {
        if (hasPlayed.Value) {
            unsavedProgress.SetActive(true);
            this.gameObject.SetActive(false);
        } else {
            Application.Quit();
        }
    }
}