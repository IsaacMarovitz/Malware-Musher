using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Gun : WeaponScript {

    public GameObject bulletPrefab;
    public Transform firePoint;
    public GunObject gunObject;
    private GunObject objectCheck;

    void Start() {
        timeLeft = cooldownTime;
        if (gunObject != null) {
            objectCheck = gunObject;
        }
    }

    public void Update() {
        if (gunObject != null) {
            if (gunObject != objectCheck) {
                gunObject.Initialise(gameObject);
                objectCheck = gunObject;
            }
            if (Input.GetButtonDown("Fire1")) {
                Shoot();
            }
            if (!cooldownComplete) {
                timeLeft = Time.time - startTime;
            }
        }
    }

    public override void Shoot() {
        if (cooldownComplete) {
            GameObject bullet = Instantiate(bulletPrefab, firePoint.position, firePoint.rotation);
            bullet.GetComponent<Bullet>().FromPlayer();
            bullet.GetComponent<Bullet>().damageDelt = damageDelt;
            cooldownComplete = false;
            startTime = Time.time;
            StartCoroutine(Cooldown());
        }
    }
}
