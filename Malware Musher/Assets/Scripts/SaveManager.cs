using System.IO;
using System.Runtime.Serialization.Formatters.Binary;
using UnityEngine;

public class SaveManager : MonoBehaviour {

    public void Save(LevelObjectClass[] loc, string saveFile) {
        SaveData saveData = new SaveData(loc, System.DateTime.Now.ToString("MM/dd/yyyy H:mm"));
        BinaryFormatter bf = new BinaryFormatter();
        string filePath = Application.persistentDataPath + "/" + saveFile;
        FileStream file = File.Create(filePath);
        bf.Serialize(file, saveData);
        file.Close();
        if (File.Exists(filePath)) {
            Debug.Log("Saved Succesfuly");
        }
    }

    public SaveData Load(string saveFile) {
        string filePath = Application.persistentDataPath + "/" + saveFile;
        if (File.Exists(filePath)) {
            BinaryFormatter bf = new BinaryFormatter();
            FileStream file = File.Open(filePath, FileMode.Open);
            SaveData saveData = (SaveData)bf.Deserialize(file);
            file.Close();
            return saveData;
        } else {
            return null;
        }
    }

    public bool[] CheckFiles(string[] filePaths) {
        bool[] files = new bool[filePaths.Length];
        for (int i = 0; i < filePaths.Length; i++) {
            if (File.Exists(Application.persistentDataPath + "/" + filePaths[i])) {
                files[i] = true;
            } else {
                files[i] = false;
            }
        }
        return files;
    }
}
